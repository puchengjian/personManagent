<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.person.chat.dao.ChatFriendMapper">

    <select id="listChatFriend" resultType="chatFriendVO">
        SELECT u.id, u.user_name, u.photo, IF(count(f.is_read) > 0, true, false) `read`
        from chat_friend f
        inner join sys_user u on f.friend_user_id = u.id
        WHERE f.my_user_id = #{myUserId}
        and f.is_read = false
        GROUP BY f.friend_user_id
    </select>

</mapper>
